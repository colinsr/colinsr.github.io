<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>AWS EC2 | Colin's blog</title>
<meta name=keywords content="aws,amazon web services,EC2">
<meta name=description content="In this post we&rsquo;re going to walk through setting an AWS EC2 (elastic compute cloud) instance. During the course of this post we&rsquo;ll talk through some of the different options available and why they&rsquo;re important.
Up until now we&rsquo;ve been going over what some may consider boring. IAM Permissions and VPC Networking are not necessarily at the top of everyone&rsquo;s list of things they have queued up to learn. Well I have good news, we&rsquo;re going to have a pair of web servers running in EC2 by the time you finish reading this post.">
<meta name=author content="Colin Detwiller">
<link rel=canonical href=https://colin.detwiller.me/posts/aws_ec2/>
<meta name=google-site-verification content="XYZabc">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.1e44d58192cbf6d7a4eb649bc43dbc3d4cc432677e5d8adc69b08c34cbe461ac.css integrity="sha256-HkTVgZLL9tek62SbxD28PUzEMmd+XYrcabCMNMvkYaw=" rel="preload stylesheet" as=style>
<link rel=icon href=https://colin.detwiller.me/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://colin.detwiller.me/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://colin.detwiller.me/favicon-32x32.png>
<link rel=apple-touch-icon href=https://colin.detwiller.me/apple-touch-icon.png>
<link rel=mask-icon href=https://colin.detwiller.me/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.92.1">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-70072280-3','auto'),ga('send','pageview'))</script><meta property="og:title" content="AWS EC2">
<meta property="og:description" content="In this post we&rsquo;re going to walk through setting an AWS EC2 (elastic compute cloud) instance. During the course of this post we&rsquo;ll talk through some of the different options available and why they&rsquo;re important.
Up until now we&rsquo;ve been going over what some may consider boring. IAM Permissions and VPC Networking are not necessarily at the top of everyone&rsquo;s list of things they have queued up to learn. Well I have good news, we&rsquo;re going to have a pair of web servers running in EC2 by the time you finish reading this post.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://colin.detwiller.me/posts/aws_ec2/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2018-03-22T06:58:44-04:00">
<meta property="article:modified_time" content="2018-03-22T06:58:44-04:00"><meta property="og:site_name" content="Colin's blog">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="AWS EC2">
<meta name=twitter:description content="In this post we&rsquo;re going to walk through setting an AWS EC2 (elastic compute cloud) instance. During the course of this post we&rsquo;ll talk through some of the different options available and why they&rsquo;re important.
Up until now we&rsquo;ve been going over what some may consider boring. IAM Permissions and VPC Networking are not necessarily at the top of everyone&rsquo;s list of things they have queued up to learn. Well I have good news, we&rsquo;re going to have a pair of web servers running in EC2 by the time you finish reading this post.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://colin.detwiller.me/posts/"},{"@type":"ListItem","position":2,"name":"AWS EC2","item":"https://colin.detwiller.me/posts/aws_ec2/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"AWS EC2","name":"AWS EC2","description":"In this post we\u0026rsquo;re going to walk through setting an AWS EC2 (elastic compute cloud) instance. During the course of this post we\u0026rsquo;ll talk through some of the different options available and why they\u0026rsquo;re important.\nUp until now we\u0026rsquo;ve been going over what some may consider boring. IAM Permissions and VPC Networking are not necessarily at the top of everyone\u0026rsquo;s list of things they have queued up to learn. Well I have good news, we\u0026rsquo;re going to have a pair of web servers running in EC2 by the time you finish reading this post.","keywords":["aws","amazon web services","EC2"],"articleBody":"In this post we‚Äôre going to walk through setting an AWS EC2 (elastic compute cloud) instance. During the course of this post we‚Äôll talk through some of the different options available and why they‚Äôre important.\nUp until now we‚Äôve been going over what some may consider boring. IAM Permissions and VPC Networking are not necessarily at the top of everyone‚Äôs list of things they have queued up to learn. Well I have good news, we‚Äôre going to have a pair of web servers running in EC2 by the time you finish reading this post. And all of that Permission and Networking knowledge is really going to pay off.\nA quick recap of what we did in the VPC post is in order. We created a new VPC, created two public subnets, created/attached an Internet Gateway to our VPC, created a new Route Table and added a route for all non-local traffic to pass through the IGW remembering of course to associate it to our public Subnets, added a new Network Access Control List with the requisite ingress/egress rules - SSH from my IP and HTTP/S traffic over ports 80 \u0026 443 as well as the ephemeral ports 32768-65535 before associating it with our public Subnets, then we created a Security Group and added the same inbound rules omitting the outbound since SGs are stateful.We certainly were busy.\nPicking up where we left off we‚Äôre going to be creating 2 Amazon linux EC2 instances to act as web servers. I‚Äôll walk through the process on the web server we deploy to our public-1 Subnet and then you can rinse and repeat for the web server in the public-2 subnet.\nWhat is an EC2 instance?? AWS EC2 is just another one of the services that AWS provides. They are virtual servers, that can be scaled up (add more power) or scaled out (add more capacity) on demand and are able to run workloads on Linux or Windows Operating Systems.The starting point for an EC2 instance is going to be the AMI or Amazon Machine Image. An AMI includes some of the OS level settings, root drives, additional drives attached to an instance, installed software/packages, as well as the Operating System itself. You can use an AMI provided by AWS, any number of companies who provide their own AMIs in the Community Marketplace, or of course, one of your own.\nNext we have the Instance Type. AWS is a bit Baskin Robbins-ish in that they have so many flavors to choose from. Different Instance Types are suited for different workloads, sometimes you‚Äôll need to do a little testing to see what Instance Type will work best for you.They can be broken down into these 5 broad categories:\n General Purpose Compute Optimized Memory Optimized Accelerated Computing Storage Optimized  Some have more CPU power, some more memory, etc etc. We‚Äôll be sticking with the AWS Free Tier in this post - which means we‚Äôll be using a t2.micro instance. Each Instance Type can be provisioned with different specs allowing you to keep the same type but scale up to get more power.\nNetwork interface card is another option we have. While a NIC is required we do have some choices to make here.Do we want only a private IP? Is a dynamic public IP sufficient for our needs or do we need a static IP?If we‚Äôre going to need a static IP then we‚Äôre going to need to allocate an Elastic IP.\nStorage is up next. There are two options for storage types on an EC2 instance, Instance Store and Elastic Block Store.EBS is persistent storage, where the EBS volume can continue to live after the EC2 instance has been terminated.Instance store is also known as ephemeral store, and with this storage option you will lose any data on your storage once your instance has been stopped or terminated.Of course in addition to the type you have size options to choose as well. Not to mention that EBS volumes come in 4 different flavors:\n EBS Provisioned IOPS SSD (io1) EBS General Purpose SSD (gp2)* Throughput Optimized HDD (st1) Cold HDD (sc1)  Since this is not a deep dive on EBS, we‚Äôll just go with GP2 since that will give us the best price/performance ratio.\nFinally we can talk about the 3 purchasing options we have:\n On Demand - pay flat rate per hour Reserved - reserve instance for 1 - 3 years and get a discount on the hourly rate Spot - set a bid price and have access to instance while spot  In order to keep it simple, we‚Äôre going with On Demand.\nLet‚Äôs create an EC2 Instance! Let‚Äôs jump on the AWS console and select the EC2 service. From the landing page, select Launch Instance.Step 1 is to choose an AMI, feel free to browse around and get a feel for what AMIs we have available. Also take notice of the ‚ÄúFree tier eligible‚Äù tag as that will save you some money if you‚Äôre still in the first 12 months of your AWS account. On this AMI page we‚Äôre going to choose Amazon Linux AMI, which should be the first option, since that includes a bunch of commonly used tools in the image.\nNext we‚Äôre presented with the Choose an Instance Type screen. We‚Äôre going to follow suit and choose the only Free tier eligible type, t2.micro. The t2 instance family provides burstable CPU credits. These help when you have short bursts of increased load, not to mention that they‚Äôre free.\nThe Configure Instance Details screen is up next and this is where we can select quite a few options.\nHere we‚Äôll make sure to choose 1 instance, target our Dev-VPC and public-1 subnet. Now this Auto-assign Public IP setting defaults to the Subnet level setting for auto-assigning public IPs, but can be overridden here to be set to enable.\nIf we were to breeze over this setting without assigning a public IP at launch time, we still have the option of attaching an Elastic IP to the instance after launch. Make sure you select Enable for this to save yourself a bit of hassle.\nIf you went through my IAM post, you‚Äôll notice the IAM role option here. As a quick refresher, we can assign a role to an AWS resource which will give it permissions defined in the role via IAM policies. This is a best practice and prevents us from having to use any type of AWS credentials from the instance itself. Since we (currently) have no need to interact with any other AWS services we‚Äôll leave that blank for now. In the past an IAM role could only be attached to an EC2 instance at launch time, but in late 2017 AWS added the ability to add/change roles attached to an instance at any time.\nThere are a few other settings here, which we‚Äôll accept the defaults for, but one in particular that‚Äôs worth talking about is the Tenancy option. This goes back to the Shared/Dedicated option we talked about in the VPC post. Dedicated means you‚Äôll be paying a lot more but you‚Äôll sleep better at night knowing that your competitor‚Äôs application is definitely not running on the same physical server - we‚Äôll stick with Shared.\nBelow the basic settings, we‚Äôll see the Network Interfaces section. Here we can add additional NICs or choose a primary IP for use that falls within the CIDR range for our Subnet. AWS provides DHCP for us, so unless we have a reason to assign a specific IP we‚Äôll let AWS DHCP do it‚Äôs thing.\nAnd bringing up the end of our instance details page is an Advanced Details setting. This is where we can inject our own custom code which will be run during the instance provisioning process.\nHere we can execute bash/powershell scripts to install packages or bootstrap our server to our little hearts content. Since we‚Äôre planning on using this instance as a web server, I‚Äôd say now is as good a time as any to learn how this works. Let‚Äôs add the following to the User Data setting As text.\n#!/bin/bash  yum update -y yum install nginx -y service nginx start The Amazon Linux AMI uses yum as a package manager, and what we‚Äôre doing here is installing and starting nginx. These User data scripts can get a bit complicated, and in that scenario we could add an IAM role to our instance which allows downloads from a specific S3 bucket where we‚Äôve parked our complicated bootstrap script. Alternatively we could use some configuration management tool like Puppet, Chef, Ansible, or SaltStack to handle the configuration for us.We don‚Äôt need to worry too much about that since our bootstrapping will just install and start nginx.\nNext we‚Äôre on the Add Storage screen. Here we can increase the size of our Root volume, change the volume type or attach additional volumes. We‚Äôll take the defaults here as they should be good enough for our purposes.\nNext up is Add Tags, we‚Äôll want to add a Name: web-1 tag to our instance so that it can clearly identify it‚Äôs purpose. There are many conventions for tagging resources, usually they revolve around Billing and resource grouping.\nStep 6 is Configure Security Groups. An Instance needs to have at least one SG applied to it at launch. AWS is kind enough to create a new SG for us called launch-wizard-# which has port 22/SSH open to the world, but again if you followed along in the VPC post you should already have created a SG that allows SSH only from your own IP and is opened up on port 80 for our nginx traffic.Make sure to choose Select an existing security group, select our custom SG and we‚Äôre ready to move on.\nFinally, we‚Äôre presented with a Review screen to make sure all of our settings are correct before launching the new instance. Once you‚Äôve validated all the settings, go ahead and click Launch.WTH, is this stuff about keypairs. Well in order to SSH into our new server we‚Äôll need to provide a private key. We‚Äôll go ahead and create a new key pair, called dev-keypair, and then we‚Äôll download it so that we‚Äôre able to connect to our instance.\nThen we can actually launch our instance. We‚Äôre presented with a confirmation screen and we can click on the View Instances link which redirects us to the EC2 Instances view. Our Instance is currently on it‚Äôs way up.Before we go about connecting to our instance, let‚Äôs see if the web server is actually serving up the default nginx page. Snag the IPv4 Public IP and paste it into your browser. If you see the default nginx page then we are good to go.\nVoila, we‚Äôve just stood up our first web server.\nNow you just need to repeat this process for web-2.\nI know, this is not very useful having two EC2 instance that serve up a default nginx page when your route directly to their public IPs, but you need to walk before you can run so bear with me.\nAlso, worth noting, up until now we have been creating resources that don‚Äôt incur any cost. VPCs, Subnets, SGs, and NACLs are free - but instances can cost money to run. Best to stop/terminate your instances when you‚Äôre not actively working with them.\nüëç\n","wordCount":"1896","inLanguage":"en","datePublished":"2018-03-22T06:58:44-04:00","dateModified":"2018-03-22T06:58:44-04:00","author":{"@type":"Person","name":"Colin Detwiller"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://colin.detwiller.me/posts/aws_ec2/"},"publisher":{"@type":"Organization","name":"Colin's blog","logo":{"@type":"ImageObject","url":"https://colin.detwiller.me/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<ul id=menu>
<li>
<a href=https://colin.detwiller.me/categories/ title=categories>
<span>categories</span>
</a>
</li>
<li>
<a href=https://colin.detwiller.me/tags/ title=tags>
<span>tags</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://colin.detwiller.me/>Home</a>&nbsp;¬ª&nbsp;<a href=https://colin.detwiller.me/posts/>Posts</a></div>
<h1 class=post-title>
AWS EC2
</h1>
<div class=post-meta><span title="2018-03-22 06:58:44 -0400 EDT">March 22, 2018</span>&nbsp;¬∑&nbsp;9 min&nbsp;¬∑&nbsp;Colin Detwiller
</div>
</header>
<div class=post-content><p>In this post we&rsquo;re going to walk through setting an AWS EC2 (elastic compute cloud) instance. During the course of this post we&rsquo;ll talk through some of the different options available and why they&rsquo;re important.</p>
<p>Up until now we&rsquo;ve been going over what some may consider boring. <a href=/posts/aws_iam>IAM Permissions</a> and <a href=/posts/aws_vpc>VPC Networking</a> are not necessarily at the top of everyone&rsquo;s list of things they have queued up to learn. Well I have good news, we&rsquo;re going to have a pair of web servers running in EC2 by the time you finish reading this post. And all of that Permission and Networking knowledge is really going to pay off.</p>
<p>A quick recap of what we did in the VPC post is in order. We created a new VPC, created two public subnets, created/attached an Internet Gateway to our VPC, created a new Route Table and added a route for all non-local traffic to pass through the IGW remembering of course to associate it to our public Subnets, added a new Network Access Control List with the requisite ingress/egress rules - SSH from my IP and HTTP/S traffic over ports 80 & 443 as well as the ephemeral ports 32768-65535 before associating it with our public Subnets, then we created a Security Group and added the same inbound rules omitting the outbound since SGs are stateful.
We certainly were busy.</p>
<p>Picking up where we left off we&rsquo;re going to be creating 2 Amazon linux EC2 instances to act as web servers. I&rsquo;ll walk through the process on the web server we deploy to our <code>public-1</code> Subnet and then you can rinse and repeat for the web server in the <code>public-2</code> subnet.</p>
<h2 id=what-is-an-ec2-instance>What is an EC2 instance??<a hidden class=anchor aria-hidden=true href=#what-is-an-ec2-instance>#</a></h2>
<p>AWS EC2 is just another one of the services that AWS provides. They are virtual servers, that can be scaled up (add more power) or scaled out (add more capacity) on demand and are able to run workloads on Linux or Windows Operating Systems.
The starting point for an EC2 instance is going to be the AMI or Amazon Machine Image. An AMI includes some of the OS level settings, root drives, additional drives attached to an instance, installed software/packages, as well as the Operating System itself. You can use an AMI provided by AWS, any number of companies who provide their own AMIs in the Community Marketplace, or of course, one of your own.</p>
<p>Next we have the Instance Type. AWS is a bit Baskin Robbins-ish in that they have so many flavors to choose from. Different Instance Types are suited for different workloads, sometimes you&rsquo;ll need to do a little testing to see what Instance Type will work best for you.
They can be broken down into these 5 broad categories:</p>
<ul>
<li>General Purpose</li>
<li>Compute Optimized</li>
<li>Memory Optimized</li>
<li>Accelerated Computing</li>
<li>Storage Optimized</li>
</ul>
<p>Some have more CPU power, some more memory, etc etc. We&rsquo;ll be sticking with the AWS Free Tier in this post - which means we&rsquo;ll be using a <code>t2.micro</code> instance. Each Instance Type can be provisioned with different specs allowing you to keep the same type but scale up to get more power.</p>
<p>Network interface card is another option we have. While a NIC is required we do have some choices to make here.
Do we want only a private IP? Is a dynamic public IP sufficient for our needs or do we need a static IP?
If we&rsquo;re going to need a static IP then we&rsquo;re going to need to allocate an Elastic IP.</p>
<p>Storage is up next. There are two options for storage types on an EC2 instance, Instance Store and Elastic Block Store.
EBS is persistent storage, where the EBS volume can continue to live after the EC2 instance has been terminated.
Instance store is also known as ephemeral store, and with this storage option you will lose any data on your storage once your instance has been stopped or terminated.
Of course in addition to the type you have size options to choose as well. Not to mention that EBS volumes come in 4 different flavors:</p>
<ul>
<li>EBS Provisioned IOPS SSD (io1)</li>
<li>EBS General Purpose SSD (gp2)*</li>
<li>Throughput Optimized HDD (st1)</li>
<li>Cold HDD (sc1)</li>
</ul>
<p>Since this is not a deep dive on EBS, we&rsquo;ll just go with GP2 since that will give us the best price/performance ratio.</p>
<p>Finally we can talk about the 3 purchasing options we have:</p>
<ul>
<li>On Demand - pay flat rate per hour</li>
<li>Reserved - reserve instance for 1 - 3 years and get a discount on the hourly rate</li>
<li>Spot - set a bid price and have access to instance while spot &lt; bid price</li>
</ul>
<p>In order to keep it simple, we&rsquo;re going with On Demand.</p>
<h2 id=lets-create-an-ec2-instance>Let&rsquo;s create an EC2 Instance!<a hidden class=anchor aria-hidden=true href=#lets-create-an-ec2-instance>#</a></h2>
<p>Let&rsquo;s jump on the AWS console and select the EC2 service. From the landing page, select Launch Instance.
Step 1 is to choose an AMI, feel free to browse around and get a feel for what AMIs we have available. Also take notice of the &ldquo;Free tier eligible&rdquo; tag as that will save you some money if you&rsquo;re still in the first 12 months of your AWS account. On this AMI page we&rsquo;re going to choose Amazon Linux AMI, which should be the first option, since that includes a bunch of commonly used tools in the image.</p>
<p>Next we&rsquo;re presented with the Choose an Instance Type screen. We&rsquo;re going to follow suit and choose the only Free tier eligible type, <code>t2.micro</code>. The t2 instance family provides burstable CPU credits. These help when you have short bursts of increased load, not to mention that they&rsquo;re free.</p>
<p>The Configure Instance Details screen is up next and this is where we can select quite a few options.</p>
<p><img loading=lazy src=/img/EC2_instance_details.png alt="EC2 Instance Details">
</p>
<p>Here we&rsquo;ll make sure to choose 1 instance, target our <code>Dev-VPC</code> and <code>public-1</code> subnet. Now this Auto-assign Public IP setting defaults to the Subnet level setting for auto-assigning public IPs, but can be overridden here to be set to enable.</p>
<p>If we were to breeze over this setting without assigning a public IP at launch time, we still have the option of attaching an Elastic IP to the instance after launch. Make sure you select Enable for this to save yourself a bit of hassle.</p>
<p>If you went through my IAM post, you&rsquo;ll notice the IAM role option here. As a quick refresher, we can assign a role to an AWS resource which will give it permissions defined in the role via IAM policies. This is a best practice and prevents us from having to use any type of AWS credentials from the instance itself. Since we (currently) have no need to interact with any other AWS services we&rsquo;ll leave that blank for now. In the past an IAM role could only be attached to an EC2 instance at launch time, but in late 2017 AWS added the ability to add/change roles attached to an instance at any time.</p>
<p>There are a few other settings here, which we&rsquo;ll accept the defaults for, but one in particular that&rsquo;s worth talking about is the Tenancy option. This goes back to the Shared/Dedicated option we talked about in the VPC post. Dedicated means you&rsquo;ll be paying a lot more but you&rsquo;ll sleep better at night knowing that your competitor&rsquo;s application is definitely not running on the same physical server - we&rsquo;ll stick with Shared.</p>
<p>Below the basic settings, we&rsquo;ll see the Network Interfaces section. Here we can add additional NICs or choose a primary IP for use that falls within the CIDR range for our Subnet. AWS provides DHCP for us, so unless we have a reason to assign a specific IP we&rsquo;ll let AWS DHCP do it&rsquo;s thing.</p>
<p>And bringing up the end of our instance details page is an Advanced Details setting. This is where we can inject our own custom code which will be run during the instance provisioning process.</p>
<p>Here we can execute bash/powershell scripts to install packages or bootstrap our server to our little hearts content. Since we&rsquo;re planning on using this instance as a web server, I&rsquo;d say now is as good a time as any to learn how this works.
Let&rsquo;s add the following to the User Data setting As text.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e>#!/bin/bash
</span><span style=color:#75715e></span>
yum update -y
yum install nginx -y
service nginx start
</code></pre></div><p>The Amazon Linux AMI uses <code>yum</code> as a package manager, and what we&rsquo;re doing here is installing and starting nginx. These User data scripts can get a bit complicated, and in that scenario we could add an IAM role to our instance which allows downloads from a specific S3 bucket where we&rsquo;ve parked our complicated bootstrap script. Alternatively we could use some configuration management tool like Puppet, Chef, Ansible, or SaltStack to handle the configuration for us.
We don&rsquo;t need to worry too much about that since our bootstrapping will just install and start nginx.</p>
<p>Next we&rsquo;re on the Add Storage screen. Here we can increase the size of our Root volume, change the volume type or attach additional volumes. We&rsquo;ll take the defaults here as they should be good enough for our purposes.</p>
<p>Next up is Add Tags, we&rsquo;ll want to add a <code>Name: web-1</code> tag to our instance so that it can clearly identify it&rsquo;s purpose. There are many conventions for tagging resources, usually they revolve around Billing and resource grouping.</p>
<p>Step 6 is Configure Security Groups. An Instance needs to have at least one SG applied to it at launch. AWS is kind enough to create a new SG for us called <code>launch-wizard-#</code> which has port 22/SSH open to the world, but again if you followed along in the VPC post you should already have created a SG that allows SSH only from your own IP and is opened up on port 80 for our nginx traffic.
Make sure to choose Select an existing security group, select our custom SG and we&rsquo;re ready to move on.</p>
<p>Finally, we&rsquo;re presented with a Review screen to make sure all of our settings are correct before launching the new instance. Once you&rsquo;ve validated all the settings, go ahead and click Launch.</p>
<p>WTH, is this stuff about keypairs. Well in order to SSH into our new server we&rsquo;ll need to provide a private key. We&rsquo;ll go ahead and create a new key pair, called dev-keypair, and then we&rsquo;ll download it so that we&rsquo;re able to connect to our instance.</p>
<p><img loading=lazy src=/img/EC2_keypair.png alt="EC2 Key Pair">
</p>
<p>Then we can <em>actually</em> launch our instance. We&rsquo;re presented with a confirmation screen and we can click on the View Instances link which redirects us to the EC2 Instances view. Our Instance is currently on it&rsquo;s way up.</p>
<p>Before we go about connecting to our instance, let&rsquo;s see if the web server is actually serving up the default nginx page. Snag the IPv4 Public IP and paste it into your browser. If you see the default nginx page then we are good to go.</p>
<p>Voila, we&rsquo;ve just stood up our first web server.</p>
<p>Now you just need to repeat this process for <code>web-2</code>.</p>
<p>I know, this is not very useful having two EC2 instance that serve up a default nginx page when your route directly to their public IPs, but you need to walk before you can run so bear with me.</p>
<p>Also, worth noting, up until now we have been creating resources that don&rsquo;t incur any cost. VPCs, Subnets, SGs, and NACLs are free - but instances can cost money to run. Best to stop/terminate your instances when you&rsquo;re not actively working with them.</p>
<p>üëç</p>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://colin.detwiller.me/tags/aws/>aws</a></li>
<li><a href=https://colin.detwiller.me/tags/amazon-web-services/>amazon web services</a></li>
<li><a href=https://colin.detwiller.me/tags/ec2/>EC2</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://colin.detwiller.me/posts/aws_elb/>
<span class=title>¬´ Prev Page</span>
<br>
<span>AWS ELB</span>
</a>
<a class=next href=https://colin.detwiller.me/posts/aws_vpc/>
<span class=title>Next Page ¬ª</span>
<br>
<span>AWS VPC</span>
</a>
</nav>
<div class=share-buttons>
<a target=_blank rel="noopener noreferrer" aria-label="share AWS EC2 on twitter" href="https://twitter.com/intent/tweet/?text=AWS%20EC2&url=https%3a%2f%2fcolin.detwiller.me%2fposts%2faws_ec2%2f&hashtags=aws%2camazonwebservices%2cEC2"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share AWS EC2 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fcolin.detwiller.me%2fposts%2faws_ec2%2f&title=AWS%20EC2&summary=AWS%20EC2&source=https%3a%2f%2fcolin.detwiller.me%2fposts%2faws_ec2%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share AWS EC2 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fcolin.detwiller.me%2fposts%2faws_ec2%2f&title=AWS%20EC2"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
</div>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=https://colin.detwiller.me/>Colin's blog</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>